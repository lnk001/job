<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>帕达索商务镂空皮鞋</title>
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="stylesheet" type="text/css" href="css/global.css" />
<link rel="stylesheet" type="text/css" href="css/instantSale.css" />
<link rel="stylesheet" type="text/css" href="css/phone-reset.css" />
<link rel="stylesheet" type="text/css" href="css/buy.css" />
</head>
<body>
	<script type="text/javascript">
		var u = navigator.userAgent;
		if ((u.indexOf("iPhone") > -1 || u.indexOf("iPad") > -1) && window.devicePixelRatio >= 2) {
			document.body.setAttribute("class", "ios");
		}
	</script>
	<div class="page-item banner-item" id="top">
		 <img class="lazy-img" data-src="images/source/1_01.jpg" />
	</div>
	<div class="price-item">
		<div class="price-tab">
			<em id="new_price">¥0</em>
			<span>
				<label>原价</label>
				<label id="old_price">¥0</label>
			</span>
			<span>
				<label>折扣</label>
				<label id="discount">1</label>
			</span>
			<span>
				<label>节省</label>
				<label id="dec_price">¥0</label>
			</span>
		</div>
		<div class="amount-tab">
			<span class="timmer">
				<em id="day" >00</em>天
				<em id="hour">00</em>小时
				<em id="min">00</em>分钟
				<em id="sec">00</em>秒
			</span>
			<span class="amount">
				已有<em id="buy_count">882</em>人购买
			</span>
		</div>
		<div class="btn-tab">
			<a href="javascript:myscroll('order')">立即购买</a>
		</div>
	</div>
	<div class="page-item detail-item">
		<h2>产品介绍</h2>
		<p class="detail-content"><b>活动说明</b><br/>【商务镂空男士皮鞋，7折秒杀】优质的材质选取，精湛手工艺缝合，耐磨防滑，时尚潮流的外观更，透气性强。新品298元限时秒杀，全国包邮。
</p>
		<p class="detail-pic">
			<img class="lazy-img" data-src="images/source/1_02.jpg" />
            <img class="lazy-img" data-src="images/source/1_03.jpg" />
            <img class="lazy-img" data-src="images/source/1_04.jpg" />
            <img class="lazy-img" data-src="images/source/1_05.jpg" />
            <img class="lazy-img" data-src="images/source/1_06.jpg" />
            <img class="lazy-img" data-src="images/source/1_07.jpg" />
            <img class="lazy-img" data-src="images/source/1_08.jpg" />
            <img class="lazy-img" data-src="images/source/1_09.jpg" />
            <img class="lazy-img" data-src="images/source/1_10.jpg" />
            <img class="lazy-img" data-src="images/source/1_11.jpg" />
            <img class="lazy-img" data-src="images/source/1_12.jpg" />
            <img class="lazy-img" data-src="images/source/1_13.jpg" />
            <img class="lazy-img" data-src="images/source/1_14.jpg" />
            <img class="lazy-img" data-src="images/source/1_15.jpg" />
            <img class="lazy-img" data-src="images/source/1_16.jpg" />
            <img class="lazy-img" data-src="images/source/1_17.jpg" />
            <img class="lazy-img" data-src="images/source/1_18.jpg" />
            <img class="lazy-img" data-src="images/source/1_19.jpg" />
            <img class="lazy-img" data-src="images/source/1_20.jpg" />
            <img class="lazy-img" data-src="images/source/1_21.jpg" />
            <img class="lazy-img" data-src="images/source/1_22.jpg" />
            <img class="lazy-img" data-src="images/source/1_23.jpg" />
            <img class="lazy-img" data-src="images/source/1_24.jpg" />
            <img class="lazy-img" data-src="images/source/1_25.jpg" />
            <img class="lazy-img" data-src="images/source/1_26.jpg" />
            <img class="lazy-img" data-src="images/source/1_27.jpg" />
		</p>
	</div>

    <!--商品订单-->
    <div class="wrapper" id="order" >
        <p class="header">订单信息</p>
        <form action="/index.php?controller=detail&action=submit&check=aaff27d10b6b1d5bc9cdcc5cb243ebd1&token=dbce3ecba1dc924xp91fege3e4b4bfap" method="post">
            <div class="content-info">
                <div class="content-info-inner">
                    <label>姓名：</label>
                    <p>
                        <input id="name" name="name" type="text" />
                    </p>
                </div>
                <div class="content-info-inner">
                    <label>手机：</label>
                    <p>
                        <input id="mobile" name="mobile" type="tel" style="width:100%" />
                    </p>
                </div>
            </div>
            
            <!--商品颜色-->
            <div class="content-product clearfix">
                <label>颜色：</label>
                <div class="dxbox1">
                    <ul>
                    	<input type="hidden" name="color" id="color" value="">
                        <li>
                            <input type="radio" name="color" value="黑色" />
                            <a href="javascript:void(0);" class="color_radioToggle"><span class="value">黑色</span></a>
                        </li>
                        <li>
                            <input type="radio" name="color" value="棕色" />
                            <a href="javascript:void(0);" class="color_radioToggle"><span class="value">棕色</span></a>
                        </li>
                       <!-- <li>
                            <input type="radio" name="color" value="黑白" />
                            <a href="javascript:void(0);" class="color_radioToggle"><span class="value">黑白</span></a>
                        </li>-->
                    </ul>
    
                </div>
            </div>
            <!--商品尺寸-->
            <div class="content-product clearfix">
                <label>尺码：</label>
                <div class="dxbox2">
                    <ul>
                    	<input type="hidden" name="size" id="size" value="">
                        <li>
                            <input type="radio" name="size" value="38" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">38</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="39" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">39</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="40" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">40</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="41" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">41</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="42" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">42</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="43" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">43</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="44" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">44</span></a>
                        </li>
                        <li>
                            <input type="radio" name="size" value="45" />
                            <a href="javascript:void(0);" class="size_radioToggle"><span class="value">45</span></a>
                        </li>
                    </ul>
                </div>
            </div>
     		<!--商品数量-->
            <div class="content-product clearfix">
                <label>数量：</label>
                <div class="textbox">
                    <input class="min" name="" type="button" value="-" />
                    <input class="text_box" name="goodnum" id="goodnum" type="number" value="1" min="1" max="99" oninput="if(value.length>2) value=value.slice(0,2)" />
                    <input class="add" name="" type="button" value="+" />
                </div>
            </div>
            <div class="content-pay">
                <label>付款：</label>
                <p>
                    <img src="images/hdfk.gif">
                </p>
            </div>
            
            <div class="content-address">
                <label>送至：</label>
                <select name="province" id="province">
                    <option value="0">省</option>
                </select>
                <select name="city" id="city">
                    <option value="0">市</option>
                </select>
                <select name="district" id="district">
                    <option value="0">区</option>
                </select>
                <div class="content-address-detail">
                    <label>地址：</label>
                    <p>
                        <input id="address" name="address" type="text" />
                    </p>
                </div>
            </div>
            
            
            <a id="btn-buy" class="btn-buy" href="javascript:void(0)">确认购买</a>
        </form>
    </div>
    
	<div class="info"></div>
	
	<div class="btn-item">
    	<a href="javascript:myscroll('top');" class="totop"></a>
		<a href="javascript:myscroll('order');" class="buy_show">立即购买</a>
	</div>
	
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.hovertreescroll.js"></script>  
	<script type="text/javascript" src="js/instantSale.js"></script>
    <script type="text/javascript" src="js/region.js"></script>

    <script type="text/javascript">
        $(function() {
            var detail = {
                init: function() {
                    var self = this;
                    self.bindEvent();
                },
				
				rules:function(str,length){
					var MANY_ZEROS = '0000000000';
					if (typeof(str) != "string")
						str = String(str);
					return (MANY_ZEROS.substring(0,length-str.length))+str;
				},

                bindEvent: function() {
                    var self = this;
                    $("select").on("change", function() {
                        var $select = $(this);
                        var $option = $select.children();
                        if ($option.eq(0).attr("selected")) {
                            $select.css({
                                "color": "#999999"
                            });
                        } else {
                            $select.css({
                                "color": "#333333"
                            });
                        }
                    });
                    $(".btn-buy").on("click", function() {
                        if (self.checkList()) {
							var date = new Date();
							var datestr = self.rules(date.getFullYear(),4)
										+ self.rules((date.getMonth()+1),2)
										+ self.rules(date.getDate(),2)
										+ self.rules(date.getHours(),2)
										+ self.rules(date.getMinutes(),2)
										+ self.rules(date.getSeconds(),2);
							var url = window.location.search;
							if(url.indexOf('?')>-1) var siteid = url.substr(1).match(/(^|&)_id=(\d+)/)[2];
							else var siteid = 1;
                            var param = {
                                    name: $('#name').val(),
									mobile: $('#mobile').val(),
									goods: '帕达索镂空皮鞋'+'-'+$('#color').val()+'-'+$('#size').val(),
									advertiserid: 10002,
									ordernum: 10002+'-'+datestr+String(Math.random()).slice(2,6),
									price: 298,
									goodsid: 2,
									num: $("#goodnum").val(),
									amount: 298*parseInt($('#goodnum').val()),
									address: $('#province option:selected').text() + $('#city option:selected').text() + $('#district option:selected').text() + $('#address').val(),
									siteid: siteid,
									sms: 1
                                };							
							$.post('/orderSubmit.php', param, function(data){
								var msg = '';
								switch(data.status)
								{
									case 0 : msg = '订单提交成功！'; break;
									case 1 : msg = '您已经提交过订单了哦~'; break;
									default : msg = '提交失败，请稍后重试'; break;
								}
								alert(msg);
							}, 'json')
                        }
                    });
                },

                checkList: function() {

                    var name = $("#name").val();
                    var mobile = $("#mobile").val();
					var color = $("#color").val();
					var size = $("#size").val();
					var goodnum = $("#goodnum").val();
                    var province = $("#province").val();
                    var city = $("#city").val();
                    var district = $("#district").val();
                    var address = $("#address").val();

                    var province_str = $("#province").find("option:selected").text();
                    var city_str = $("#city").find("option:selected").text();
                    if (district != '0') {
                        var district_str = $("#district").find("option:selected").text();
                    }
                    $("#province_str").val(province_str);
                    $("#city_str").val(city_str);
                    $("#district_str").val(district_str);

                    if (name == '') {
                        alert('请正确填写收货人姓名');
                        return false;
                    }
                    if (mobile == '') {
                        alert('请正确填写联系手机');
                        return false;
                    }
                    var re = /^1[3|4|5|8|7][0-9]\d{8}$/;
                    if (mobile.length != 11 || !re.test(mobile)) {
                        alert('请填写有效的手机号码');
                        return false;
                    }
					if (color == '') {
                        alert('请选择商品颜色');
                        return false;
                    }
					if (size == '') {
                        alert('请选择商品尺寸');
                        return false;
                    }
					if (goodnum == '' || goodnum == '0' || goodnum == 'NaN') {
						alert('请正确填写商品数量');
						return false;
					}
                    if (province == '0' || city == '0' || district == '0') {
                        alert('请正确填写收货城市');
                        return false;
                    }
                    if (address == '') {
                        alert('请正确填写收货地址');
                        return false;
                    }
                    return true;
                }
            }
            detail.init();
        })
    </script>
</body>
</html>
